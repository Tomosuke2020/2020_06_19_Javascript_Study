<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>7.4 サーバー連携でリッチなUIを実装する -Ajax-</title>
    </head>
<body>
    <h4>ストレージの変更を監視する</h4>
    <p>
    Ajax（Asynchronous JavaScript + XML）とは、<br>
    一言でいうならば、「JavaScript（XMLHttp Requestオブジェクト）」を利用してサーバー側と非同期通信を行い、<br>
    受け取った結果をDOM経由でページに反映する仕組み」です。<br>
    以下の図を参照するとイメージしやすいでしょうか。<br>
    </p>

    <h4>従来型WEBアプリとAjaxアプリの比較</h4>

    <h4>従来型</h4>
    <p>クライアント「①ページ上で任意のイベントが発生」→・→・→サーバー「②サーバーが処理を行っている間、クライアント待ちの状態」</p>
    <p>クライアント「④ページ全体をリフレッシュ」←・←・←サーバー「③処理結果を（一般的に）HTML形式でレスポンス」</p>

    <h4>Ajaxの理念</h4>
    <p>クライアント「①ページ上で任意のイベントが発生（ボタンクリックなど）」→・→・→「②JavaScript+XMLRequestでサーバーに対してリクエストを送信（非同期送信）」「サーバーの処理中もクライアントは操作を継続できる。」</p>
    <p>クライアント「④受信したレスポンスを受けて、DOMでページを更新」←・←・←「③処理結果をJSONやXMLなどの形式で応答」（更新に必要な情報のみで応答するので通信トラフィックは「小」）</p>

    <p>従来型のWEBアプリ（同期通信）であれば、サーバー通信のたびに、ユーザーは結果が返されるのを待たなければなりませんでした。<br>
        一方、Ajax（非同期通信）を利用すれば、サーバーが処理中でもクライアント側で操作を継続できます。<br>
    </p>

    <p>
        「より直感的な－－－デスクトップアプリにもよく似たユーザーインターフェースを提供できる」という触れ込みで、<br>
        Ajax技術は2005年の登場以降、急速に普及しました。<br>
        現在では、関連するライブラリ／フレームワークでも当たり前のようにサポートされており、クライアントサイドJavaScriptを扱う上で欠かせない技術の一つとなっています。<br>
    </p>

    <p>従来型アプリとAjax対応アプリとの違いを理解するにはPHPだけ使って実装したHello Worldアプリから見てみましょう。<br></p>

    <form method="POST" action="hello.php">
        <label for="name">名前：</label>
        <input type="text" name="name" size="15"/>
        <input type="submit" name="submit" value="送信"/>
    </form>

<?php
    if($_REQUEST['submit'] !== null){
        //処理を3秒間中断(サーバー処理を体感するためのダミーの遅延)
        sleep(3);
        print('こんにちは、'. htmlspecialchars($_POST['name'], ENT_QUOTES | ENT_HTML5,
        'UTF-8').'さん！');
    }
?>

<fo
    <php src="JS/7-4.php"></php>
    <!--
    <script src="JS/7-3-5.js"></script>
        -->
</body>
</html>
