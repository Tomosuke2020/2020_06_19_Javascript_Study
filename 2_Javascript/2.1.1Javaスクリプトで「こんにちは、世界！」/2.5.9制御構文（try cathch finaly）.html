<!DOCTYPE html>

<html lang="ja">
<head>
<title>2.5.9制御構文</title>
</head>

<body>
<p>アプリを実行していると、<br>
    「数値を受け取ることに想定した関数に文字列が渡された」<br>
    「変数を参照しようとしたら未定義であった」<br>
    開発時には想定しなかった様々なエラーが発生するものです。<br>
</p>

<p>構文<br>
    try{
    例外が発生するかもしれない命令（群）<br>
    }catch（例外情報を受け取る変数） {<br>
    例外が発生した時に実行される命令（群）<br>
    } finally{ <br>
    例外の有無にかかわらず、最終的に実行される命令（群）<br>
    }<br>
</p>

<script>
var i = 1;
try {
    //iは1 だったはず。 それにかける j
    i = i * j; //ここで想像のつかないものに遭遇した。
    
    //エラーをキャッチ
    } catch(e) {
        console.log(e.message);
    }
    //キャッチしたものを報告
    finally{
        console.log('処理は完了しました。');
    }
</script>

<p>
    もしもcatch...finally 命令を利用していない場合、<br>
    1の時点で例外（未定義の変数を参照しようとしたため）<br>
    が発生し、、スクリプトが停止してしまうはずです、<br>
    fainallyブロックは不要な場合、省略しても構いません。
<br>
    しかし例外処理は確実に動作する仕組みですが、オーバーヘッド処理が大きい処理でもあります。<br>
</p>

<p>
    自分で発生することもでき、数値を除算した場合の明示的に例外を発生する例です。<br>
</p>

<script>
    var x = 1;
    var y = 0;
    try{//エラーの試験
        if (y === 0){
            throw new Error('0で除算しようとしました。');
        }
        //エラー発生した場合
        var z = x/y;
    } catch(e){
        console.log(e.message);
    }//エラーを前置にしたのでそれを返す
</script>

<p>
    ここでは、「変数yが0である場合にErrorオブジェクトを生成し処理をcatchブロックに移す」<br>
    ようにしているわけです。
</p>

<p>
    構文<br>
    throw new Error
</p>

<p>
    catcheブロックでは、先ほどと同じく、<br>
    スローされたEroorオブジェクトから<br>
    messageプロパティを取得して、<br>
    これをログとして出力しています。<br>
</p>

</body>
</html>